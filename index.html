<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>QRs</title>
  <style>
    body { font-family: Arial; }
    img { width: 200px; margin: 10px; }
  </style>
</head>
<body>

<h2>Códigos QR</h2>
<div id="lista"></div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getStorage, ref, listAll, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDVsftheOzhi3YUc8dIk2GP-gt7jgizBRA",
    authDomain: "qr-personal.firebaseapp.com",
    projectId: "qr-personal",
    storageBucket: "qr-personal.appspot.com",
    messagingSenderId: "626403024057",
    appId: "1:626403024057:web:f140b3ddc6d25d67298f68"
  };

  const app = initializeApp(firebaseConfig);
  const storage = getStorage(app);

  const contenedor = document.getElementById("lista");
  const carpeta = ref(storage, "qrs");

  try {
    const res = await listAll(carpeta);

    for (const item of res.items) {
      const url = await getDownloadURL(item);
      const img = document.createElement("img");
      img.src = url;
      contenedor.appendChild(img);
    }
  } catch (e) {
    console.error(e);
    contenedor.innerText = "❌ Error cargando imágenes";
  }
</script>

</body>
</html>
